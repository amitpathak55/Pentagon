{% extends 'core/layout/master.html' %}
{% load static %}


{% block styles %}
<style>
  .fa-ul li {
    margin-bottom: 5px;
  }

  .box-title {
    margin-right: 10px !important;
  }
</style>
{% endblock%}

{% block content %}
<section class="content-header">
  <h1>
    Report
  </h1>
  <ol class="breadcrumb">
    <li><a href="{% url 'core:dashboard' %}"><i class="fa fa-dashboard"></i> Home</a></li>
    <li><a href="{% url 'core:dashboard' %}">Report</a></li>
  </ol>
</section>

<section class="content">
  <div class="box">
    <div class="box-header with-border">
      <div class="box-body">
        <form role="form" method="GET" autocomplete="off">
          <div class="box-body">
            <div class="row formRow">
              <div class="col-md-3">
                <label>Semester</label>
                <input type="text" value="{{request.GET.starting_semester}}" name="starting_semester"
                  class="form-control">
              </div>
              <div class="col-md-3">
                <label>Entry Date</label>
                <input type="text" value="{{request.GET.entry_date}}" name="entry_date" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Last Name</label>
                <input type="text" value="{{request.GET.last_name}}" name="last_name" class="form-control">
              </div>
              <div class="col-md-3">
                <label>First Name</label>
                <input type="text" value="{{request.GET.first_name}}" name="first_name" class="form-control">
              </div>
            </div>
            <div class="row formRow">
              <div class="col-md-3">
                <label>Student ID</label>
                <input type="text" value="{{request.GET.student_id}}" name="student_id" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Degree</label>
                <input type="text" value="{{request.GET.degree}}" name="degree" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Program</label>
                <input type="text" value="{{request.GET.program}}" name="program" class="form-control">
              </div>
              <div class="col-md-3">
                <label>GPA</label>
                <input type="text" value="{{request.GET.gpa}}" name="gpa" class="form-control">
              </div>
            </div>
            <div class="row formRow">
              <div class="col-md-2">
                <label>GREQ</label>
                <div class="input-group">
                  <input name="greq_score" value="{{request.GET.greq_score}}" type="text" class="form-control">
                </div>
              </div>
              <div class="col-md-2">
                <label>GREQ%</label>
                <div class="input-group">
                  <input name="greq_score_percent" value="{{request.GET.greq_score_percent}}" type="text"
                    class="form-control">
                  <span class="input-group-addon">%</span>
                </div>
              </div>
              <div class="col-md-2">
                <label>GREV</label>
                <div class="input-group">
                  <input name="grev_score" value="{{request.GET.grev_score}}" type="text" class="form-control">
                </div>
              </div>
              <div class="col-md-2">
                <label>GREV%</label>
                <div class="input-group">
                  <input name="grev_score_percent" value="{{request.GET.grev_score_percent}}" type="text"
                    class="form-control">
                  <span class="input-group-addon">%</span>
                </div>
              </div>
              <div class="col-md-2">
                <label>GREAW</label>
                <div class="input-group">
                  <input name="grea_score" value="{{request.GET.grea_score}}" type="text" class="form-control">
                  <span class="input-group-addon">%</span>
                </div>
              </div>
              <div class="col-md-2">
                <label>GREAW%</label>
                <div class="input-group">
                  <input name="grea_score_percent" value="{{request.GET.grea_score_percent}}" type="text"
                    class="form-control">
                  <span class="input-group-addon">%</span>
                </div>
              </div>
              <div class="col-md-2">
                <label>Total GRE</label>
                <input type="text" name="gre_total_score" value="{{request.GET.gre_total_score}}" class="form-control">
              </div>
              <div class="col-md-2">
                <label>ELP</label>
                <input type="text" name="elp_score" value="{{request.GET.elp_score}}" class="form-control">
              </div>
            </div>
            <div class="row formRow">
              <div class="col-md-2">
                <label>Gender</label>
                <input type="text" name="gender" value="{{request.GET.gender}}" class="form-control">
              </div>
              <div class="col-md-2">
                <label>City</label>
                <input type="text" name="city" value="{{request.GET.city}}" class="form-control">
              </div>
              <div class="col-md-2">
                <label>State</label>
                <input type="text" name="state" value="{{request.GET.state}}" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Country</label>
                <input type="text" name="country" value="{{request.GET.country}}" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Citizenship</label>
                <input type="text" name="citizenship" value="{{request.GET.citizenship}}" class="form-control">
              </div>
            </div>
            <div class="row formRow">
              <div class="col-md-8">
                <label>Email</label>
                <input type="text" name="email" value="{{request.GET.email}}" class="form-control">
              </div>
              <div class="col-md-4">
                <label>Immigration</label>
                <input type="text" name="immigration" value="{{request.GET.immigration}}" class="form-control">
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-8">
                <label>Bachelor's Degree</label>
                <input type="text" name="bachelors_degree" value="{{request.GET.bachelors_degree}}"
                  class="form-control" />
              </div>
              <div class="col-md-4">
                <label>Country of Bachelor's</label>
                <input type="text" name="bachelors_degree_country" value="{{request.GET.bachelors_degree_country}}"
                  class="form-control" />
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-8">
                <label>Master's Degree</label>
                <input type="text" name="master_degree" value="{{request.GET.master_degree}}" class="form-control" />
              </div>
              <div class="col-md-4">
                <label>Country of Master's </label>
                <input type="text" name="master_degree_country" value="{{request.GET.master_degree_country}}"
                  class="form-control" />
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-8">
                <label>Level</label>
                <input type="text" name="level" value="{{request.GET.level}}" class="form-control">
              </div>
              <div class="col-md-4">
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-12">
                <label>Notes</label>
                <textarea name="note" class="form-control">{{request.GET.note}}</textarea>
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-4">
                <label>Decision</label>
                <input type="text" value="{{request.GET.decision}}" name="decision" class="form-control">
              </div>
              <div class="col-md-4">
                <label>Decision Date</label>
                <input type="text" value="{{request.GET.decision_date}}" name="decision_date" class="form-control">
              </div>
              <div class="col-md-4">
                <label>Reason </label>
                <input type="text" value="{{request.GET.decision_reason}}" name="decision_reason" class="form-control">
              </div>
            </div>

            <div class="row formRow">
              <div class="col-md-3">
                <label>Hire Date</label>
                <input type="text" value="{{request.GET.hire_date}}" name="hire_date" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Hire Type</label>
                <input type="text" value="{{request.GET.hire_type}}" name="hire_type" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Funding Source</label>
                <input type="text" value="{{request.GET.funding_source}}" name="funding_source" class="form-control">
              </div>
              <div class="col-md-3">
                <label>Assignment</label>
                <input type="text" value="{{request.GET.assignment}}" name="assignment" class="form-control">
              </div>
            </div>
          </div>
          <div class="box-footer">
            <input type="submit" name="next" style="margin-right: 5px;" value="Submit"
              class="btn btn-success pull-right btn-flat">
            <a class="btn btn-warning pull-right btn-flat" style="margin-right: 12px;"
              href="{% url 'student:report' %}">
              Reset
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="row" style="margin: 0px;">
    <a href="?display=list{% for key, value in request.GET.items %}{% if key != 'display' %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
      class="btn btn-sm btn-primary pull-right" style="margin: 2px;">
      PostCard View
    </a>
    <a href="?display=table{% for key, value in request.GET.items %}{% if key != 'display' %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
      class="btn btn-sm btn-success pull-right" style="margin: 2px;">
      Table View
    </a>
  </div>
  {% if request.GET.display != 'table' %}
  <div class="box box-primary">
    <div class="box-body" style="background-color: #ecf0f5;">
      {% for student in students %}
      <div class="col-md-6">
        <div class="box box-solid">
          <div class="box-header with-border">
            <div class="input-group-btn pull-right" style="padding-right: 80px;">
              <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
                aria-expanded="false">
                Action <span class="fa fa-caret-down"></span>
              </button>
              <ul class="dropdown-menu">
                <li>
                  <a href="{% url 'student:student_profile' student.pk %}">
                    <i class="fa fa-drivers-license"></i>Profile</a>
                </li>
                <li>
                  <a href="{% url 'student:list_education_history' student.pk %}">
                    <i class="fa fa-graduation-cap"></i>Education</a>
                </li>
                <li>
                  <a href="{% url 'student:list_user_notes' student.pk %}">
                    <i class="fa fa-sticky-note"></i>Notes</a>
                </li>
                <li>
                  <a href="{% url 'student:list_user_files' student.pk %}">
                    <i class="fa fa-file"></i>Files</a>
                </li>
                <li>
                  <a href="{% url 'student:student_milestone' student.pk %}">
                    <i class="fa fa-thumb-tack"></i>Milestones</a>
                </li>
                <li>
                  <a href="{% url 'student:list_user_employment_history' student.pk %}">
                    <i class="fa fa-briefcase"></i>Employment History</a>
                </li>
              </ul>
            </div>

            <h3 class="box-title">
              {{ student.first_name }} {% if student.middle_name %} {{student.middle_name }} {% endif %}
              {{ student.last_name }}
            </h3>
            <span class="badge bg-green">
              {% if student.gender == 'M' %}Male
              {% elif student.gender == 'F'%}Female
              {% elif student.gender == 'O' %}Other{% else %}N/A{%endif %}
            </span>
            <span class="badge bg-green">
              {{ student.program |default_if_none:"N/A"}}
            </span>
          </div>
          <!-- /.box-header -->
          <div class="box-body">
            <div class="row">
              <div class="col-md-4">
                {% if student.image %}
                <img src="{{ student.image.url }}" style="width: 140px; height: 140px;" />
                {% else %}
                <img src="/media/unt.svg" style="width: 140px; height: 140px;" />
                {% endif %}
              </div>
              <div class="col-md-6">
                <ul class="ml-4 mb-0 fa-ul text-muted">
                  <li class="small">
                    <span class="fa-li"><i class="fa fa-lg fa-address-card"></i></span>
                    Student ID: {{ student.student_id }}
                  </li>
                  <li class="small">
                    <span class="fa-li"><i class="fa fa-lg fa-envelope"></i></span>
                    Email: {% if student.email %}
                    <a href="mailto:{{student.email}}" target="_top">
                      Send Mail</a>
                    {% else %} {% endif %}
                  </li>
                  <li class="small">
                    <span class="fa-li"><i class="fa fa-lg fa-calendar"></i></span>
                    Starting Semester: {{student.starting_semester|default_if_none:"" }}
                  </li>
                  <li class="small">
                    <span class="fa-li"><i class="fa fa-lg fa-users"></i></span>
                    Advisor: {{ student.advisor | default_if_none:"" }}
                  </li>
                  <li class="small">
                    <span class="fa-li"><i class="fa fa-lg fa-users"></i></span>
                    Program: {{ student.program | default_if_none:"" }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- /.box-body -->
        </div>
        <!-- /.box -->
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %} {% if request.GET.display == 'table' %}
  <div class="box box-primary">
    <div class="box-body" style="background-color: #fff;">
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Student ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Starting Semester</th>
              <th>Advisor</th>
              <th>Program Enrolled</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for student in students %}
            <tr>
              <td>{{ student.student_id }}</td>
              <td>
                {{ student.first_name }}&nbsp;
                {% if student.middle_name %}
                {{ student.middle_name }}&nbsp;
                {% endif %}
                {{ student.last_name}}
              </td>
              <td>{{ student.email|default_if_none:"" }}</td>
              <td>{{ student.starting_semester|default_if_none:"" }}</td>
              <td>{{ student.advisor|default_if_none:"" }}</td>
              <td>{{ student.program| default_if_none:""  }}</td>
              <td>
                <a class="btn btn-primary btn-sm" href="{% url 'student:student_profile' student.pk %}">
                  <i class="fa fa-drivers-license"></i>&nbsp;Profile</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="row" style="text-align: center;">
    {% if is_paginated %}
    <ul class="pagination">
      {% if page_obj.has_previous %}
      <li>
        <a
          href="?page={{ page_obj.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">&laquo;</a>
      </li>
      {% else %}
      <li class="disabled"><span>&laquo;</span></li>
      {% endif %}
      {% for i in paginator.page_range %} {% if page_obj.number == i%}
      <li class="active">
        <span>{{ i }} <span class="sr-only">(current)</span></span>
      </li>
      {% else %}
      <li>
        <a
          href="?page={{ i }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">{{ i }}</a>
      </li>
      {% endif %} {% endfor %} {% if page_obj.has_next %}
      <li>
        <a
          href="?page={{ page_obj.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">&raquo;</a>
      </li>
      {% else %}
      <li class="disabled"><span>&raquo;</span></li>
      {% endif %}
    </ul>
    {% endif %}
  </div>
</section>


</section>

{% endblock content %}